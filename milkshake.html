<!--

 * milkshake -- WebGL Milkdrop-esque visualisation (port of projectM)
 * Copyright (C)2011 Matt Gattis and contributors
 *
 * This library is free software; you can redistribute it and/or
 * modify it under the terms of the GNU Lesser General Public
 * License as published by the Free Software Foundation; either
 * version 2.1 of the License, or (at your option) any later version.
 *
 * This library is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU
 * Lesser General Public License for more details.
 *
 * You should have received a copy of the GNU Lesser General Public
 * License along with this library; if not, write to the Free Software
 * Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
 * See 'LICENSE.txt' included within this release

-->


<html>

  <head>
    <link rel='stylesheet' type='text/css' href='controls.css'/>

    <script type="text/javascript" src="milkshake.js"></script>

    <script type="text/javascript" src="jquery.min.js"></script>

    <style type="text/css">
    body {
      border: 0;
      margin: 0;
      overflow: hidden;
    }
    #milkshake {
      position: absolute;
      top: 0;
      left: 0;
      z-index: 0;
      border: none;
    }
    </style>

    <script>
    controls = {
      playing: true,
      next: function() {
        this.stop();
        milkAudio.trackPos++;
        this.play();   
      },
      previous: function () {
        if (milkAudio.trackPos === 0) {
          console.log("You can't go back...");
          return;
        }

        this.stop();
        milkAudio.trackPos--;
        this.play();
      },
      pause: function () {
        this.playing = false;
        soundManager.pauseAll();
      },
      stop: function () {
        this.playing = false;
        soundManager.stopAll();
      },
      play: function () {
        if (this.playing) {
          console.log('already playing...');
          return;
        }
        this.playing = true;
        soundManager.play(milkAudio.tracks[milkAudio.trackPos]);
      },
      togglePause: function() {
        if (this.playing) {
          this.pause();
        }
        else {
          this.play();
        }
      },
    };

    $(document).ready(function() {

      //controls.pause();

      $('.control.play').click(function(){
        controls.togglePause();
        var newButtonText = controls.playing? 'Pause' : 'Play';
        $(this).html(newButtonText);
      });
      $('.control.previous').click(function(){
        controls.previous();
      });
      $('.control.next').click(function(){
        controls.next();
      });

    });
    </script>

  </head>

  <body onload="milk.shake('canvas');">
    <canvas id="canvas">
      Sorry, you need a more updated browser to see this, because it uses WebGL.
      Try the latest <a href="http://www.google.com/chrome">Google Chrome</a>
      or <a href="http://www.mozilla.org/firefox">Firefox<a/>.
    </canvas>

    <div class='controls'>
      <div class='control previous'>
        Previous Track
      </div>
      <div class='control play'>
        Pause
      </div>
      <div class='control next'>
        Next Track
      </div>
    </div>
  </body>

</html>
